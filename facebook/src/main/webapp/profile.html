<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">


<link rel="stylesheet" type="text/css" href="dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="dist/css/bootstrap-theme.min.css">
	<script src="dist/js/jquery-1.9.1.js"></script>
    <script src="dist/js/bootstrap.js"></script>
    <script src="dist/font/"></script>

	<link rel="stylesheet" href="css/profile_timeline.css">
	<script src="js/navbar.js"></script>
	<script src="js/profile_timeline.js"></script>
	<link rel="stylesheet" href="css/chat.css">
	<script src="js/chat.js"></script>
	
    <title>Profile</title>
	

</head>

<body style="background-color: #dfe3ee">
	<nav class="navbar navbarstyle2  navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<img class="img-responsive2" src="icon.png"
					style="height: 50px; width: auto;"> <a class="navbar-brand"
					href="#" style="color: black; font-weight: 500px;">Closer</a>
			</div>
			<form id="searchform" class="navbar-form navbar-left">
				<div class="input-group">
					<input type="Search" id="searchPeople" name="searchPeople"
						placeholder="Search..." class="form-control"
						style="min-width: 30em;" />
					<div class="input-group-btn">
						<button class="btn" type="submit">
							<span class="glyphicon glyphicon-search"></span>
						</button>
					</div>
				</div>
			</form>
			<ul class="nav navbar-nav navbar-right">
				<li><img src="" style="height:50px;width:auto;" class="activepage" id="UserHomeImg"></img>
				</li>
				<li class="activepage2"><a href="profile.html"
					style="color: blue;" id="UserHome">
						</a></li>
				<li class="ex1"><a href="home.html"
					style="color: white;"><span class="glyphicon glyphicon-user"></span>
						Home</a></li>
				<li class="ex1"><a href="index.html" style="color: white;"><span
						class="glyphicon glyphicon-log-out"></span> Logout</a></li>
			</ul>
		</div>
	</nav>

	<div class="container-fluid" style="margin-top: 3.6em;">
		<div class="row">
			<div class="col-md-3 padding-0" style="position: relative;">
				<img src="" id="profilePhotoImg" class="img-responsive crop">
				<button
					style="position: absolute; bottom: 0; left: 0; background-color: grey; border: none;"
					type="button" class="btn btn-info" data-toggle="modal"
					data-target="#myModal2">
					<span class="glyphicon glyphicon-camera"></span>
				</button>

			</div>
			<div class="col-md-7 padding-0">
				<img src="a.jpg" class="img-responsive crop">
			</div>
		</div>
	</div>


	<!--  Edit from here  Edit from here Edit from here Edit from here Edit from here Edit from here-->
	<div class="container-fluid">
		<ul class="nav nav-pills" style="margin-left: 24em;">
			<li><button onclick="showTimeline()"
					class="btn ex1 navbarstyle activepage"
					style="font-weight: bold; background: white; color: black;"
					id="Timeline">Timeline</button></li>
			<li><button
					onclick="window.location.href = 'profileAbout.html';"
					class="btn ex1 navbarstyle"
					style="font-weight: bold; background: #dfe3ee; color: black;"
					id="About">
					<span class="glyphicon glyphicon-user"></span> About
				</button></li>
			<li><button
					onclick="window.location.href = 'profilePhotos.html';"
					class="btn ex1 navbarstyle"
					style="font-weight: bold; background: #dfe3ee; color: black;">
					<span class="glyphicon glyphicon-camera"></span> Photos
				</button></li>
			<li><button
					onclick="window.location.href = 'profileFriends.html';"
					class="btn ex1 navbarstyle"
					style="font-weight: bold; background: #dfe3ee; color: black;">
					<span class="glyphicon glyphicon-glass"></span> Friends
				</button></li>
			<li><button
					onclick="window.location.href = 'PwdVerify.html';"
					class="btn ex1 navbarstyle"
					style="font-weight: bold; background: #dfe3ee; color: black;">
					<span class="glyphicon glyphicon-edit"></span> Change Password
				</button></li>
		</ul>
	</div>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-3">
				<br>
				<div class="panel panel-default">
					<div class="panel-heading"
						style="background-color: white; font-size: 30px;">
						<div>
							<span class="glyphicon glyphicon-globe"
								style="font-size: 20px; color: blue;"></span>&ensp;Intro
						</div>
					</div>
					<div class="panel-body">
						<p>
							<span class="glyphicon glyphicon-home" style="color: #A9A9A9"></span>
							Lives in <span id="introCity" style="color: blue;"></span>
						</p>
						<p>
							<span class="glyphicon glyphicon-education"
								style="color: #A9A9A9"></span> Studies at <span id="introCollege" style="color:blue;"></span>
						</p>
						<p>
							<span class="glyphicon glyphicon-briefcase"
								style="color: #A9A9A9"></span> Works at <span id="introWork" style="color:blue;"></span>
						</p>
						<p>
							<span class="glyphicon glyphicon-phone" style="color: #A9A9A9"></span>
							Mob. No <span id="introMobile" style="color:blue;"></span>
						</p>
						<p>
							<span class="glyphicon glyphicon-calendar" style="color: #A9A9A9"></span>
							Birthday <span id="introDOB" style="color: blue;"></span>
						</p>
						<p>
							<span class="glyphicon glyphicon-heart" style="color: #A9A9A9"></span>
							Status <span id="introStatus" style="color:blue;"></span>
						</p>
						<p>
							<span class="glyphicon glyphicon-link" style="color: #A9A9A9"></span>
							Email <span id="introEmail" style="color:blue;"></span>
						</p>
						<p>
							<span class="glyphicon glyphicon-map-marker"
								style="color: #A9A9A9"></span> Country <span id="introCountry" style="color:blue;"></span>
						</p>
						<p>
							<span class="glyphicon glyphicon-map-marker"
								style="color: #A9A9A9"></span> Sports <span id="introSports" style="color:blue;"></span>
						</p>

					</div>
				</div>
				<div class="panel panel-default">
					<div class="panel-heading">
						<a href="profilePhotos.html"> <b>Photos</b></a>
					</div>
					<div class="panel-body"></div>
				</div>
				<div class="panel panel-default">
					<div class="panel-heading">
						<a href="profileFriends.html"> <b>Friends</b></a>
					</div>
					<div class="panel-body"></div>
				</div>
			</div>
			<div class="col-md-5" style="padding-right: 1em;" id="newsFeed">
				<br>
				<form id="onmymind" action="webapi/newsfeed" method="post"
					enctype="multipart/form-data">
					<div class="panel panel-default">
						<div class="panel-heading">
							<a href="#" id="newsfeedPicToggle" type="button"><span
								class="glyphicon glyphicon-camera"></span> Upload Photo</a>
							<div id="fileName"></div>
							<input type="file" id="newsfeedPic" name="newsfeedPic"
								style="display: none;">
						</div>
						<div class="panel-body">
							<textarea id="newsfeedStatus" name="newsfeedStatus"
								placeholder="What's on your mind..."
								style="width: 100%; border: 0; outline: 0;"></textarea>
						</div>
						<div class="panel-footer">
							<button id="newsfeedPost" type="submit" class="btn btn-primary pull-right">Post</button>
							<div class="clearfix"></div>
						</div>
					</div>
				</form>

			</div>
			<div class="col-md-2"></div>
			<div class="col-md-2 fixedChat" style="padding-right: 0em;">
				<div class="panel panel-default" id="chatPanel">
					<div class="panel-heading">
						<p>Chats</p>
					</div>
					<div class="panel-body" id="chatPanelBody"></div>
				</div>
			</div>
		</div>
	</div>
		<!-- ------------------------------------------------------------------------------------ -->
		<!-- Modal -->
		<div id="myModal2" class="modal fade" role="dialog">
			<div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Upload Photo</h4>
					</div>

					<div class="modal-body">
						<div class="container-fluid row" style="display: inline;">
							<div class="col-md-8">
								<form id="myModal2Form" action="webapi/file/upload"
									method="post" enctype="multipart/form-data">
									<p id="uploadImage">
										Select a file : <input type="file" name="file" size="45"
											class="btn btn-success" required/>
									</p>
									<input type="text" name="Id" id="profilePhotoId" value=""
										style="display: none;"> <input type="submit"
										value="Upload It" class="btn btn-warning" />

								</form>
							</div>
							<div class="col-md-4">
								<img src="a.jpg" id="modalProfileImg"
									style="width: 100%; height: 10em;" onError="doSomething();" />
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
</body>

<!-- ----------------------------MODAL FOR LIKES------------------- -->

<!-- Modal -->
<div id="likesModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-body" id="likesModalBody">
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<div id="postImageVerifyDiv" style="display:none;">
</div>
</html>
<script>
	var displayIntro = function(data) {
		if (data["DOB"])
			$('#introDOB').append(" " + data['DOB']);
		else
			$('#introDOB').parent().remove();
		if (data["email"])
			$('#introEmail').append(" " + data['email']);
		else
			$('#introEmail').parent().remove();
		if (data["hometown"])
			$('#introCity').append(" " + data['hometown']);
		else
			$('#introCity').parent().remove();
		if (data["mobile"])
			$('#introMobile').append(" " + data['mobile']);
		else
			$('#introMobile').parent().remove();
		if (data["country"])
			$('#introCountry').append(" " + data['country']);
		else
			$('#introCountry').parent().remove();
		if (data["college"])
			$('#introCollege').append(" " + data['college']);
		else
			$('#introCollege').parent().remove();
		if (data["works"])
			$('#introWork').append(" " + data['works']);
		else
			$('#introWork').parent().remove();
		if (data["status"])
			$('#introStatus').append(" " + data['status']);
		else
			$('#introStatus').parent().remove();
	};
	/*function load_home() {
	 document.getElementById("section1").innerHTML='<object type="text/html" data="home.html" style="width:100%; height: 100%;" ></object>';
	 }*/
	//var friends=document.getElementById("section2");
	//var photos=document.getElementById("section3");
	var profileImgTemp = "a.jpg";
	window.onload = function() {
		//when the document is finished loading, replace everything
		//between the <a ...> </a> tags with the value of splitText
		document.getElementById("profilePhotoId").value = sessionStorage.id;
		//document.getElementById("profilePhotoImg").src="users/"+sessionStorage.id+"/profile.jpg";
	}

	function doSomething() {
		document.getElementById('modalProfileImg').src = profileImgTemp;
		document.getElementById('profilePhotoImg').src = profileImgTemp;
		document.getElementById('UserHomeImg').src= profileImgTemp;
	}
	//-----------------------------------------------------------------//
	//------------------------------------------------------------//
	$('#myModal2').on('shown.bs.modal', function(e) {
		document.getElementById("profilePhotoId").value = sessionStorage.id;
	})
	//------------------------------------------------------------//
	//-----------------------------------------------------------------//
	$(".btn").mouseup(function() {
		$(this).blur();
	})
	//-----------------------------------------------------------//
	$.ajax({
		type : "post",
		// make sure you respect the same origin policy with this url:
		// http://en.wikipedia.org/wiki/Same_origin_policy
		//dataType: "text",
		url : "webapi/profile/" + sessionStorage.id,

		success : function(msg) {
			//console.log(msg);
			displayIntro(msg);
			document.getElementById("profilePhotoImg").src = msg.profileImage;
		}
	});
	//-----------------------------------/
	var modalform2 = $('#myModal2Form');
	modalform2
			.submit(function() {
				var fd = new FormData($('#myModal2Form')[0]);
				console.info(fd);
				$
						.ajax({
							type : modalform2.attr('method'),
							url : modalform2.attr('action'),
							data : fd,
							enctype : 'multipart/form-data',
							processData : false, // Important!
							contentType : false,
							cache : false,
							success : function(data) {
								if (data) {
									profileImgTemp = data;
									document.getElementById('modalProfileImg').src = profileImgTemp;
									document.getElementById('profilePhotoImg').src = profileImgTemp;
									//setTimeout(location.reload.bind(location),8000);
								} else {
									alert("Try Again");
								}
							}
						});

				return false;
			});
	
	//--------------------------//
	
	$.ajax({
		type : "get",
		url : "webapi/sportsofinterest/" + sessionStorage.id,
		success : function(data) {
			//console.log(data);
			$('#introSports').append(" "+data);
			if(data=="None")
				$('#introSports').parent().remove();
		}
	});
	
</script>
